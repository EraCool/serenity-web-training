serenity.test.root = todomvc
headless.mode = true

environment = "angular,run_with_edge"

# Custom report data
report.customfields.ApplicationVersion = 1.2.3
report.customfields.platform = "#{target_plaform}"
report.customfields.driver = "#{webdriver.driver}"
report.customfields.user = ${USER}
report.customfields.order = "ApplicationVersion,driver,platform,user"

environments {
  #
  # Browser configurations
  #
  run_with_chrome {
    webdriver.driver = chrome

    chrome {
      switches = [
        "--start-maximized",
        "--accept-insecure-certs",
        # Commented lined like this are ignored
        //        "window-size=800,600",
        "--disable-popup-blocking",
        "--ignore-certificate-errors",
        "--disable-infobars"
        "--disable-gpu"
      ]

      # See all the preference options here: https://chromedriver.chromium.org/capabilities
      preferences {
        download {
          prompt_for_download: false
          default_directory: "$TEMPDIR"
        }
      }
    }
  }

  run_with_edge {
    webdriver.driver = edge

    edge {
      args = [
        "window-size=800,600",
        "test-type"
        "no-sandbox"
        "ignore-certificate-errors;"
      ]
      preferences {
        download {
          default_directory = "$TEMPDIR"
          directory_upgrade = true
          prompt_for_download = false
        }
        plugins.always_open_pdf_externally = true
      }

    }
  }
  #
  # Target environments
  #
  angular {
    target_plaform = angular
    pages {
      home = "https://todomvc.com/examples/angularjs/#/"
    }
  }
  react {
    target_plaform = react
    pages {
      home = "https://todomvc.com/examples/react/#/"
    }
  }
  vue {
    target_plaform = vue
    pages {
      home = "https://todomvc.com/examples/vue"
    }
  }
}
